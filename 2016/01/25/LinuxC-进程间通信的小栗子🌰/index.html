<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> LinuxC 进程间通信的小栗子🌰 · Don 的博客</title><meta name="description" content="🌰在这里
1#include &amp;#60;stdio.h&amp;#62;&amp;#10;#include &amp;#60;sys/types.h&amp;#62;&amp;#10;#include &amp;#60;sys/ipc.h&amp;#62;&amp;#10;#include &amp;#60;sys/msg.h&amp;#62;&amp;#10;/**&amp;#10;* &amp;#36827;&amp;#31243;&amp;#38388;&amp;#36890;&amp;#20449; &amp;#21457;&amp;#36865;&amp;#31471;&amp;#10;**/&amp;#10;int main()&amp;#10;&amp;#123;&amp;#10;&amp;#9;int msgid;&amp;#10;&amp;#10;  &amp;#9;struct msg &amp;#123;&amp;#10;&amp;#9;&amp;#9;long type;&amp;#10;&amp;#9;&amp;#9;char data[20];&amp;#10;&amp;#9;&amp;#125; don = &amp;#123;&amp;#10;&amp;#9;&amp;#9;.type = 1L,&amp;#10;&amp;#9;&amp;#9;.data = &amp;#34;Hello Msg&amp;#34;,&amp;"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="https://github.com/guodont" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">LinuxC 进程间通信的小栗子🌰</h1><div class="post-meta"><div class="post-time">Jan 25, 2016</div></div><div class="post-content"><p>🌰在这里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &#60;stdio.h&#62;&#10;#include &#60;sys/types.h&#62;&#10;#include &#60;sys/ipc.h&#62;&#10;#include &#60;sys/msg.h&#62;&#10;/**&#10;* &#36827;&#31243;&#38388;&#36890;&#20449; &#21457;&#36865;&#31471;&#10;**/&#10;int main()&#10;&#123;&#10;&#9;int msgid;&#10;&#10;  &#9;struct msg &#123;&#10;&#9;&#9;long type;&#10;&#9;&#9;char data[20];&#10;&#9;&#125; don = &#123;&#10;&#9;&#9;.type = 1L,&#10;&#9;&#9;.data = &#34;Hello Msg&#34;,&#10;&#9;&#125;;&#9;// &#28040;&#24687;&#31867;&#22411;&#10;&#10;&#9;//struct msg don; //&#160;&#23454;&#20363;&#21270;&#10;&#10;&#9;key_t key;&#10;&#10;&#9;key = ftok(&#34;/home&#34; , &#39;i&#39;);&#10;&#10;&#9;msgid = msgget(key, IPC_CREAT | 0666);&#9;&#10;&#9;&#10;&#9;msgsnd(msgid, &#38;don, sizeof(don) - sizeof(long), 0);&#9;&#10;&#9;&#10;&#9;return 0;&#10;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include&#60;stdio.h&#62;&#10;#include&#60;sys/types.h&#62;&#10;#include&#60;sys/ipc.h&#62;&#10;#include&#60;sys/msg.h&#62;&#10;/**&#10;* &#36827;&#31243;&#38388;&#36890;&#20449; &#25509;&#25910;&#31471;&#10;**/&#10;int main()&#10;&#123;&#10;&#9;int msgid;&#10;&#9;&#10;&#9;key_t key;&#10;&#10;&#9;struct msg&#10;&#9;&#123;&#10;&#9;&#9;long type;&#10;&#9;&#9;char data[20];&#10;&#9;&#125;;&#10;&#10;&#9;struct msg don;&#9;// &#23454;&#20363;&#21270; &#34429;&#28982;&#21464;&#37327;&#21517;&#19968;&#26679;,&#20294;&#20114;&#19981;&#24178;&#25200;&#10;&#9;&#10;&#9;key = ftok(&#34;/home&#34;,&#39;i&#39;);&#10;&#10;&#9;msgid = msgget(key, 0666);&#10;&#10;&#9;while(1)&#10;&#9;&#123;&#10;&#9;&#9;msgrcv(msgid, &#38;don, sizeof(don) - sizeof(long), 0, 0);&#9;&#10;&#9;&#10;&#9;&#9;printf(&#34;rcvbuf = %s\n&#34;, don.data);&#10;&#9;&#125;&#10;&#10;&#9;return 0;&#10;&#125;</span><br></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a class="prev"> </a><a href="/2016/01/25/AboutMe/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'guodont';
var disqus_identifier = '2016/01/25/LinuxC-进程间通信的小栗子🌰/';
var disqus_title = 'LinuxC 进程间通信的小栗子🌰';
var disqus_url = 'http://yoursite.com/2016/01/25/LinuxC-进程间通信的小栗子🌰/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//guodont.disqus.com/count.js" async></script></footer><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>